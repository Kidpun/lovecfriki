# CheckFRIKI

Автоматический мониторинг и активация реферальных ссылок из Telegram-каналов в режиме реального времени.

> Создано [@pentawork](https://t.me/pentawork)

## Возможности

Скрипт эффективно ловит и активирует чеки из указанных Telegram-каналов:

- **Мгновенная реакция** - активирует ссылки сразу после публикации в каналах
- **Автоматическая обработка** - находит ссылки в тексте сообщений и инлайн-кнопках
- **Умная логика** - делает повторные попытки активации и прекращает при неудаче
- **Мониторинг доступа** - отслеживает доступность каналов в реальном времени
- **Автоматическая подписка** - подписывается через переходник при отсутствии доступа

## Установка

### Требования

- Python 3.7 или выше
- Аккаунт Telegram

### macOS

1. Установите Python (если еще не установлен):
```bash
brew install python3
```

2. Клонируйте репозиторий:
```bash
git clone https://github.com/Kidpun/lovecfriki.git
cd lovecfriki
```

3. Создайте виртуальное окружение (рекомендуется):
```bash
python3 -m venv venv
source venv/bin/activate
```

4. Установите зависимости:
```bash
pip install -r requirements.txt
```

### Windows

1. Установите Python с [python.org](https://www.python.org/downloads/)
   - При установке отметьте "Add Python to PATH"

2. Клонируйте репозиторий:
```powershell
git clone https://github.com/Kidpun/lovecfriki.git
cd lovecfriki
```

3. Создайте виртуальное окружение:
```powershell
python -m venv venv
venv\Scripts\activate
```

4. Установите зависимости:
```powershell
pip install -r requirements.txt
```

### Linux Debian/Ubuntu

1. Установите Python и pip:
```bash
sudo apt update
sudo apt install python3 python3-pip python3-venv
```

2. Клонируйте репозиторий:
```bash
git clone https://github.com/Kidpun/lovecfriki.git
cd lovecfriki
```

3. Создайте виртуальное окружение:
```bash
python3 -m venv venv
source venv/bin/activate
```

4. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Получение API credentials

1. Перейдите на [my.telegram.org/apps](https://my.telegram.org/apps)
2. Войдите в свой аккаунт Telegram
3. Создайте новое приложение:
   - **App title**: любое название (например, "CheckFRIKI")
   - **Short name**: короткое имя (например, "checkfriki")
   - **Platform**: Desktop
   - **Description**: можно оставить пустым
4. После создания вы получите:
   - **api_id** - числовой идентификатор
   - **api_hash** - строковый хеш

## Первый запуск

1. Запустите скрипт:
```bash
python main.py
```

2. Скрипт спросит API credentials (если они не указаны в `.env`):
   - Введите ваш **api_id** (число)
   - Введите ваш **api_hash** (строка)

3. При первом запуске потребуется авторизация:
   - Введите номер телефона в формате `+1234567890`
   - Введите код подтверждения из Telegram
   - Если у вас включена двухфакторная аутентификация, введите пароль

4. После успешной авторизации сессия сохранится в файл `telegram_bot_session.session`

## Настройка

### Через терминал (рекомендуется)

При запуске скрипт автоматически попросит ввести API credentials, если они не найдены в конфигурации.

### Через файл .env (альтернатива)

Создайте файл `.env` в корне проекта:

```env
TELEGRAM_API_ID=ваш_api_id
TELEGRAM_API_HASH=ваш_api_hash
TELEGRAM_PHONE_NUMBER=+1234567890
```

### Настройка каналов

Отредактируйте `config.py` и укажите ID каналов для мониторинга:

```python
CHANNELS = [
    -1001335391393,  # ID первого канала
    -1002304081962,  # ID второго канала
    -1001077610923,  # ID третьего канала
]
```

Как узнать ID канала:
- Используйте бота [@userinfobot](https://t.me/userinfobot)
- Или используйте онлайн-инструменты для получения ID каналов

## Использование

После настройки просто запустите скрипт:

```bash
python main.py
```

Скрипт будет:
- Мониторить указанные каналы в реальном времени
- Автоматически находить и активировать реферальные ссылки
- Показывать статус доступа к каналам
- Обновлять статус при получении новых сообщений

Для остановки нажмите `Ctrl+C`.

## Как это работает

1. Скрипт подключается к Telegram через официальный API (Telethon)
2. Регистрирует обработчики событий для мониторинга указанных каналов
3. При получении нового сообщения:
   - Ищет реферальные ссылки вида `https://t.me/FreakRedanBot?start=code_XXX`
   - Проверяет ссылки в тексте и инлайн-кнопках
   - Извлекает параметр активации
   - Мгновенно отправляет команду боту
4. Отслеживает ответы бота и корректно обрабатывает ошибки
5. При отсутствии доступа к каналу автоматически подписывается через переходник

## Возможные проблемы

**Ошибка "API credentials not found"**
- Убедитесь, что правильно ввели api_id и api_hash
- Проверьте, что файл `.env` находится в корне проекта (если используете)

**Ошибка авторизации**
- Проверьте правильность номера телефона (формат: +1234567890)
- Убедитесь, что код подтверждения введен корректно

**Канал недоступен**
- Скрипт автоматически попытается подписаться через переходник
- Убедитесь, что у вас есть доступ к переходнику [@freaksredana](https://t.me/freaksredana)

## Зависимости

- `telethon>=1.34.0` - библиотека для работы с Telegram API
- `python-dotenv>=1.0.0` - загрузка переменных окружения

## Лицензия

MIT

## Автор

[@pentawork](https://t.me/pentawork)
